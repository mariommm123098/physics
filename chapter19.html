<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Physics Storybook: The Full Journey</title>
    <style>
        :root {
            --bg-color: #F4F4F0;
            --text-color: #1a1a1a;
            --card-bg: #ffffff;
            --accent-main: #FF6B6B; /* é‡ç‚¹çº¢ */
            --accent-blue: #4ECDC4; /* é€»è¾‘è“ */
            --accent-yellow: #FFE66D; /* æç¤ºé»„ */
            --border-width: 3px;
            --card-radius: 24px;
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --font-serif: 'Georgia', serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* --- é¡¶éƒ¨å·¥å…·æ  --- */
        .top-bar {
            position: absolute; top: 20px; right: 20px; z-index: 100;
            display: flex; gap: 10px;
        }
        .action-btn {
            background: black; color: white; border: none; padding: 8px 16px;
            font-weight: bold; font-size: 0.9rem; border-radius: 30px; cursor: pointer;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.2); transition: transform 0.1s;
        }
        .action-btn:active { transform: scale(0.95); }

        /* --- ä¸»èˆå° --- */
        .stage-container {
            width: 90%; max-width: 500px; height: 75vh;
            position: relative;
        }

        /* --- å¡ç‰‡é€šç”¨æ ·å¼ --- */
        .card {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--card-bg);
            border: var(--border-width) solid black;
            border-radius: var(--card-radius);
            padding: 24px;
            box-shadow: 8px 8px 0px black; /* æ–°ç²—é‡ä¸»ä¹‰é˜´å½± */
            display: flex; flex-direction: column;
            opacity: 0; pointer-events: none;
            transform: translateX(50px);
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            overflow-y: auto;
        }

        .card.active { opacity: 1; transform: translateX(0); pointer-events: auto; z-index: 10; }
        .card.prev { opacity: 0; transform: translateX(-50px); z-index: 5; }

        /* --- æ’ç‰ˆä¸å†…å®¹ --- */
        h1 { font-size: 2.4rem; line-height: 1.1; margin-bottom: 20px; font-weight: 800; letter-spacing: -1px; }
        h2 { font-size: 1.5rem; margin-bottom: 15px; border-bottom: 4px solid black; display: inline-block; padding-bottom: 5px; }
        p { font-size: 1.05rem; line-height: 1.6; margin-bottom: 15px; color: #333; }
        
        .highlight { background: var(--accent-yellow); padding: 0 4px; border-radius: 4px; font-weight: bold; }
        
        /* å…¬å¼æ¡† */
        .formula-box {
            background: #FAFAFA; border: 2px dashed #999; border-radius: 12px;
            padding: 15px; margin: 15px 0; text-align: center;
            font-family: var(--font-serif); font-size: 1.4rem; font-style: italic;
        }
        .formula-note { font-size: 0.8rem; color: #666; margin-top: 5px; font-family: var(--font-main); font-style: normal; }

        /* --- Canvas å®¹å™¨ --- */
        .visual-box {
            width: 100%; height: 240px;
            background: white; border: 2px solid black; border-radius: 16px;
            margin: 10px 0 20px 0; position: relative; overflow: hidden;
        }
        canvas { width: 100%; height: 100%; display: block; }
        
        /* äº¤äº’æ»‘å—åŒºåŸŸ */
        .control-panel {
            background: #eee; padding: 15px; border-radius: 12px; margin-top: auto;
            border: 2px solid black;
        }
        input[type=range] { width: 100%; margin: 10px 0; cursor: pointer; }
        .label-row { display: flex; justify-content: space-between; font-size: 0.9rem; font-weight: bold; }

        /* --- åº•éƒ¨å¯¼èˆª --- */
        .nav-bar {
            margin-top: 25px; display: flex; gap: 20px; align-items: center; justify-content: center; z-index: 100;
        }
        .nav-btn {
            width: 60px; height: 60px; border-radius: 50%; background: white;
            border: 3px solid black; font-size: 1.8rem; display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 4px 4px 0px black; transition: transform 0.1s;
        }
        .nav-btn:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px black; }
        .nav-btn:disabled { opacity: 0.2; cursor: not-allowed; box-shadow: none; transform: translate(4px, 4px); }
        .progress-text { font-weight: 800; font-size: 1.1rem; letter-spacing: 1px; }

        /* --- åŒè¯­æ§åˆ¶ --- */
        [lang="en"] { display: none; }
        body.lang-en [lang="en"] { display: block; }
        body.lang-en [lang="zh"] { display: none; }

        /* --- èƒŒæ™¯è‰² --- */
        .bg-white { background: white; }
        .bg-blue { background: #E3F2FD; }
        .bg-pink { background: #FFEBEE; }
        .bg-yellow { background: #FFFDE7; }

    </style>
</head>
<body class="lang-zh">

    <div class="top-bar">
        <button class="action-btn" id="langBtn">ä¸­ / EN</button>
    </div>

    <div class="stage-container">

        <div class="card active bg-white" data-id="0">
            <div style="margin-top:auto; margin-bottom:auto;">
                <h1 lang="zh">ç‰©ç†æ•…äº‹ä¹¦<br>æŒ¯åŠ¨ä¸æ³¢</h1>
                <h1 lang="en">Physics Storybook:<br>Oscillations</h1>
                <p lang="zh">è¿™æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹çš„æŒ‡å—ã€‚æˆ‘ä»¬å°†æ‹†è§£æ¯ä¸€ä¸ªå…¬å¼çš„æ¥æºï¼Œä¸ç•™æ­»è§’ã€‚</p>
                <p lang="en">A zero-to-hero guide. We will deconstruct every formula. No steps skipped.</p>
                <div style="margin-top:30px; border-top:2px solid black; padding-top:10px; font-size:0.9rem; color:#666;">
                    <span lang="zh">åŒ…å«ï¼šSin/Cosçš„ç”±æ¥ã€åœ†å‘¨è¿åŠ¨æ¨¡å‹ã€èƒ½é‡ä¸å…±æŒ¯</span>
                    <span lang="en">Includes: Origin of Sin/Cos, Circle Model, Energy & Resonance</span>
                </div>
            </div>
            <p style="text-align:center; font-size:0.8rem; margin-top:20px;">Designed for Ben</p>
        </div>

        <div class="card bg-blue" data-id="1">
            <h2 lang="zh">01. å½±å­çš„ç§˜å¯†</h2>
            <h2 lang="en">01. The Shadow Secret</h2>
            
            <p lang="zh">æˆ‘ä»¬ç ”ç©¶å¼¹ç°§æˆ–å•æ‘†æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªæƒŠäººçš„å·§åˆï¼š</p>
            <p lang="en">When studying springs or pendulums, we found a coincidence:</p>
            
            <div class="visual-box" id="canvas-shadow">
                <canvas></canvas>
            </div>

            <p lang="zh"><strong>â€œç®€è°è¿åŠ¨ (SHM) å°±æ˜¯åŒ€é€Ÿåœ†å‘¨è¿åŠ¨çš„æŠ•å½±ã€‚â€</strong></p>
            <p lang="en"><strong>"Simple Harmonic Motion is just the shadow of Circular Motion."</strong></p>

            <p lang="zh">è¿™ä¸ä»…æ˜¯æ¯”å–»ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¨å¯¼æ‰€æœ‰å…¬å¼çš„æ ¹åŸºã€‚è®°ä½è¿™ä¸ªåœ†ï¼</p>
            <p lang="en">This isn't just a metaphor. It's the root of all our formulas. Remember this circle!</p>
        </div>

        <div class="card bg-blue" data-id="2">
            <h2 lang="zh">02. ç¬¬ä¸€æ ¹æ£å­ï¼šxâ‚€</h2>
            <h2 lang="en">02. The First Stick: xâ‚€</h2>
            
            <p lang="zh">è¿™ä¸ªå‚è€ƒåœ†çš„åŠå¾„æ˜¯å›ºå®šçš„ã€‚åœ¨æŒ¯åŠ¨é‡Œï¼Œæˆ‘ä»¬æŠŠâ€œåŠå¾„â€æ”¹åå«<strong>æŒ¯å¹… (Amplitude)</strong>ï¼Œç¬¦å·æ˜¯ <strong>xâ‚€</strong>ã€‚</p>
            <p lang="en">The circle's radius is fixed. In physics, we rename "Radius" to <strong>Amplitude</strong>, symbol <strong>xâ‚€</strong>.</p>
            
            <div class="visual-box" id="canvas-radius">
                <canvas></canvas>
            </div>

            <p lang="zh">æ— è®ºåœ†æ€ä¹ˆè½¬ï¼Œè¿™æ ¹è“è‰²çš„æ£å­(xâ‚€) <strong>é•¿åº¦æ°¸è¿œä¸å˜</strong>ã€‚</p>
            <p lang="en">No matter how it spins, this blue stick (xâ‚€) <strong>never changes length</strong>.</p>
        </div>

        <div class="card bg-yellow" data-id="3">
            <h2 lang="zh">03. å¯»æ‰¾ä¸‰è§’å½¢</h2>
            <h2 lang="en">03. Finding the Triangle</h2>
            
            <p lang="zh">è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚è¯·æ‹–åŠ¨æ»‘å—ï¼Œçœ‹ä¸‰è§’å½¢æ˜¯æ€ä¹ˆé•¿å‡ºæ¥çš„ã€‚</p>
            <p lang="en">Crucial Step. Drag the slider to see the triangle grow.</p>

            <div class="visual-box" id="canvas-triangle">
                <canvas></canvas>
            </div>

            <div class="control-panel">
                <div class="label-row">
                    <span>0Â°</span>
                    <span lang="zh">æ‹–åŠ¨æ—‹è½¬è§’åº¦ (Î¸)</span><span lang="en">Drag Angle (Î¸)</span>
                    <span>360Â°</span>
                </div>
                <input type="range" id="angleSlider" min="0" max="360" value="45">
            </div>

            <p lang="zh" style="margin-top:10px; font-size:0.9rem;">
                è“çº¿ = åŠå¾„ (xâ‚€)<br>
                <span style="color:#FF6B6B; font-weight:bold;">çº¢çº¿ = å½“å‰é«˜åº¦ (x)</span>
            </p>
        </div>

        <div class="card bg-yellow" data-id="4">
            <h2 lang="zh">04. å…¬å¼è¯ç”Ÿ</h2>
            <h2 lang="en">04. Formula Birth</h2>
            
            <p lang="zh">å›åˆ°åˆä¸­æ•°å­¦ã€‚çœ‹åˆšæ‰é‚£ä¸ªä¸‰è§’å½¢ï¼š</p>
            <p lang="en">Back to basic math. Look at that triangle:</p>
            
            <div class="formula-box">
                sin(Î¸) = <span style="color:#FF6B6B">çº¢</span> / <span style="color:blue">è“</span>
                <br>
                sin(Î¸) = x / xâ‚€
            </div>

            <p lang="zh">æˆ‘ä»¬è¦ç®—çš„æ˜¯â€œé«˜åº¦ xâ€ï¼Œæ‰€ä»¥æŠŠ xâ‚€ ä¹˜è¿‡å»ï¼š</p>
            <p lang="en">We want "Height x", so multiply xâ‚€ over:</p>

            <div class="formula-box" style="border: 2px solid black; background: #fff;">
                x = xâ‚€ sin(Î¸)
            </div>

            <p lang="zh">è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰ sinï¼å› ä¸ºå®ƒåœ¨ç®—ä¸‰è§’å½¢çš„å¯¹è¾¹é«˜åº¦ã€‚</p>
            <p lang="en">This is why sin exists! It calculates the height.</p>
        </div>

        <div class="card bg-pink" data-id="5">
            <h2 lang="zh">05. è§’åº¦å»å“ªäº†ï¼Ÿ</h2>
            <h2 lang="en">05. Where's the Angle?</h2>
            
            <p lang="zh">ç‰©ç†é¢˜é‡Œæ²¡æœ‰é‡è§’å™¨ï¼Œåªæœ‰ç§’è¡¨ï¼ˆæ—¶é—´ tï¼‰ã€‚æˆ‘ä»¬éœ€è¦æŠŠè§’åº¦ Î¸ æ¢æˆæ—¶é—´ tã€‚</p>
            <p lang="en">Physics uses Stopwatches (time t), not Protractors. We need to swap Î¸ for t.</p>

            <p lang="zh">å…¬å¼ï¼š<strong>è·ç¦» = é€Ÿåº¦ Ã— æ—¶é—´</strong></p>
            <p lang="en">Formula: <strong>Distance = Speed Ã— Time</strong></p>

            <ul style="margin-left:20px; margin-bottom:15px; font-size:0.9rem;">
                <li lang="zh">æ—‹è½¬çš„é€Ÿåº¦å« <strong>è§’é¢‘ç‡ (Ï‰)</strong></li>
                <li lang="en">Spinning speed is <strong>Angular Frequency (Ï‰)</strong></li>
                <li>Î¸ = Ï‰t</li>
            </ul>

            <p lang="zh">å¸¦å…¥åˆšæ‰çš„å…¬å¼ï¼Œå¾—åˆ°æœ€ç»ˆå½¢æ€ï¼š</p>
            <p lang="en">Substitute it back, getting the final form:</p>

            <div class="formula-box" style="font-weight:bold;">
                x = xâ‚€ sin(Ï‰t)
            </div>
        </div>

        <div class="card bg-pink" data-id="6">
            <h2 lang="zh">06. è‡´å‘½é™·é˜±ï¼šå¼§åº¦</h2>
            <h2 lang="en">06. The Trap: Radians</h2>
            
            <p lang="zh">âš ï¸ <strong>åšé¢˜å¿…çœ‹</strong>ï¼š</p>
            <p lang="en">âš ï¸ <strong>Exam Alert</strong>:</p>

            <p lang="zh">å…¬å¼é‡Œçš„ Ï‰t æ˜¯<strong>å¼§åº¦ (Radians)</strong>ï¼Œä¸æ˜¯è§’åº¦ã€‚å¦‚æœä½ è®¡ç®—å™¨è®¾åœ¨ Degree æ¨¡å¼ï¼Œä½ ä¼šç®—é”™æ‰€æœ‰é¢˜ç›®ã€‚</p>
            <p lang="en">The Ï‰t is in <strong>Radians</strong>, not degrees. If your calculator is in Degree mode, you fail.</p>
            
            <div class="visual-box" id="canvas-rad" style="height:150px;">
                <canvas></canvas>
            </div>

            <div class="formula-box">
                360Â° = 2Ï€ rad
            </div>
            <p lang="zh" style="font-size:0.9rem">åªè¦çœ‹åˆ°æ‹¬å·é‡Œæœ‰ Ï€ æˆ–è€… tï¼Œé©¬ä¸Šåˆ‡åˆ° RAD æ¨¡å¼ï¼</p>
            <p lang="en" style="font-size:0.9rem">See Ï€ or t inside brackets? Switch to RAD mode NOW!</p>
        </div>

        <div class="card bg-white" data-id="7">
            <h2 lang="zh">07. è°å¿«è°æ…¢ï¼Ÿ</h2>
            <h2 lang="en">07. Fast or Slow?</h2>
            
            <p lang="zh">ç°åœ¨æˆ‘ä»¬ä¸çœ‹æ•°å­¦ï¼Œç”¨ç›´è§‰ã€‚æƒ³è±¡ä½ åœ¨è¡ç§‹åƒã€‚</p>
            <p lang="en">Forget math for a sec. Use intuition. Imagine a swing.</p>

            <div class="visual-box" id="canvas-swing">
                <canvas></canvas>
            </div>

            <ul style="margin-left:20px;">
                <li lang="zh"><strong>ä¸­é—´ (x=0)</strong>ï¼šé€Ÿåº¦æœ€å¿« (v max)</li>
                <li lang="en"><strong>Center (x=0)</strong>: Fastest (v max)</li>
                <li lang="zh"><strong>ä¸¤å¤´ (x=xâ‚€)</strong>ï¼šç¬é—´åœä¸‹ (v=0)</li>
                <li lang="en"><strong>Ends (x=xâ‚€)</strong>: Stops (v=0)</li>
            </ul>

            <div class="formula-box">
                vâ‚€ = Ï‰xâ‚€
                <div class="formula-note">æœ€å¤§é€Ÿåº¦å…¬å¼ Max Velocity</div>
            </div>
        </div>

        <div class="card bg-white" data-id="8">
            <h2 lang="zh">08. ç‰©ç†å®šä¹‰çš„æ¥æº</h2>
            <h2 lang="en">08. The Physics Definition</h2>
            
            <p lang="zh">ä¸ºä»€ä¹ˆç®€è°è¿åŠ¨çš„å®šä¹‰æ˜¯ <strong>a = -Ï‰Â²x</strong>ï¼Ÿ<br>å®ƒæ˜¯ç‰›é¡¿å’Œèƒ¡å…‹ç”Ÿçš„å­©å­ã€‚</p>
            <p lang="en">Why is SHM defined as <strong>a = -Ï‰Â²x</strong>?<br>It's the child of Newton and Hooke.</p>

            <div style="background:#eee; padding:15px; border-radius:10px;">
                <p>1. Newton: <strong>F = ma</strong></p>
                <p>2. Hooke: <strong>F = -kx</strong></p>
                <hr style="border-top:1px dashed #999; margin:10px 0;">
                <p>Combine: <strong>ma = -kx</strong></p>
                <p>Result: <strong>a = -(k/m)x</strong></p>
            </div>

            <p lang="zh" style="margin-top:15px;">ç‰©ç†å­¦å®¶ä¸ºäº†å·æ‡’ï¼Œä»¤ k/m = Ï‰Â²ã€‚æ‰€ä»¥å¾—åˆ°äº† a = -Ï‰Â²xã€‚</p>
            <p lang="en" style="margin-top:15px;">Physicists let k/m = Ï‰Â². Hence a = -Ï‰Â²x.</p>
        </div>

        <div class="card bg-yellow" data-id="9">
            <h2 lang="zh">09. èƒ½é‡çš„äº¤æ¢</h2>
            <h2 lang="en">09. Energy Swap</h2>
            
            <p lang="zh">èƒ½é‡å°±åƒä¸¤ä¸ªæ¯å­é‡Œçš„æ°´ï¼Œå€’æ¥å€’å»ã€‚</p>
            <p lang="en">Energy is like water swapping between two cups.</p>
            
            <div class="visual-box" id="canvas-energy">
                <canvas></canvas>
            </div>
            
            <div style="display:flex; justify-content:space-around; text-align:center; font-size:0.9rem;">
                <div style="color:#FF6B6B; font-weight:bold;">åŠ¨èƒ½ Ek<br>(Kinetic)</div>
                <div style="color:#4ECDC4; font-weight:bold;">åŠ¿èƒ½ Ep<br>(Potential)</div>
            </div>

            <p lang="zh" style="margin-top:15px;"><strong>æ€»èƒ½é‡æ˜¯å®ˆæ’çš„</strong>ï¼Œä¸”ä¸æŒ¯å¹…çš„å¹³æ–¹ (xâ‚€Â²) æˆæ­£æ¯”ã€‚</p>
        </div>

        <div class="card bg-white" data-id="10">
            <h2 lang="zh">10. ç»ˆç« ï¼šå…±æŒ¯</h2>
            <h2 lang="en">10. Finale: Resonance</h2>
            
            <p lang="zh">æ¯ä¸ªç‰©ä½“éƒ½æœ‰è‡ªå·±çš„è„¾æ°”ï¼ˆå›ºæœ‰é¢‘ç‡ï¼‰ã€‚å¦‚æœä½ æ¨å®ƒçš„èŠ‚å¥æ­£å¥½å¯¹ä¸Šäº†å®ƒçš„è„¾æ°”...</p>
            <p lang="en">Everything has a temper (Natural Frequency). If you push it at exactly that rhythm...</p>

            <div class="visual-box" id="canvas-res">
                <canvas></canvas>
            </div>
            
            <button id="pushBtn" style="width:100%; padding:20px; background:var(--accent-main); color:white; border:none; border-radius:12px; font-weight:bold; font-size:1.1rem; box-shadow:0 4px 0 #c0392b;">
                <span lang="zh">æ¨ä¸€ä¸‹ (Push!)</span><span lang="en">Push It!</span>
            </button>
            
            <p lang="zh" style="margin-top:15px; font-size:0.9rem;">è¯•ç€æŒ‰èŠ‚å¥ç‚¹å‡»ï¼Œçœ‹èƒ½å¦è®©å®ƒé£èµ·æ¥ï¼</p>
        </div>
        
        <div class="card bg-white" data-id="11">
            <h2 lang="zh">å®Œç»“æ’’èŠ±</h2>
            <h2 lang="en">The End</h2>
            <p lang="zh">ä½ å·²ç»æŒæ¡äº†è¿™ä¸€ç« æœ€åº•å±‚çš„é€»è¾‘ï¼šä»åœ†çš„æŠ•å½±åˆ° Sin å‡½æ•°ï¼Œå†åˆ°èƒ½é‡å®ˆæ’ã€‚</p>
            <p lang="en">You've mastered the core logic: From circular shadows to sine waves to energy.</p>
            <p lang="zh">è¿™ä¸ä»…æ˜¯åº”è¯•ï¼Œè¿™æ˜¯ç‰©ç†çš„ç¾æ„Ÿã€‚</p>
            <div style="margin-top:50px; text-align:center; font-size:3rem;">ğŸ‰</div>
        </div>

    </div>

    <div class="nav-bar">
        <button class="nav-btn" id="prevBtn" disabled>â†</button>
        <div class="progress-text" id="pageInd">1 / 12</div>
        <button class="nav-btn" id="nextBtn">â†’</button>
    </div>

    <script>
        /* --- æ ¸å¿ƒé€»è¾‘ --- */
        const state = {
            currentSlide: 0,
            totalSlides: 12,
            lang: 'zh',
            animators: {} // å­˜æ”¾æ‰€æœ‰åŠ¨ç”»å¾ªç¯
        };

        // DOM å…ƒç´ 
        const dom = {
            slides: document.querySelectorAll('.card'),
            prevBtn: document.getElementById('prevBtn'),
            nextBtn: document.getElementById('nextBtn'),
            pageInd: document.getElementById('pageInd'),
            langBtn: document.getElementById('langBtn'),
            angleSlider: document.getElementById('angleSlider'),
            pushBtn: document.getElementById('pushBtn')
        };

        /* --- å¯¼èˆªæ§åˆ¶ --- */
        function updateUI() {
            // æ›´æ–°å¡ç‰‡çŠ¶æ€
            dom.slides.forEach((slide, idx) => {
                slide.classList.remove('active', 'prev');
                if (idx === state.currentSlide) {
                    slide.classList.add('active');
                    startScene(idx); // å¯åŠ¨å½“å‰é¡µåŠ¨ç”»
                } else if (idx < state.currentSlide) {
                    slide.classList.add('prev');
                    stopScene(idx); // åœæ­¢æ—§åŠ¨ç”»
                } else {
                    stopScene(idx);
                }
            });

            // æ›´æ–°æŒ‰é’®
            dom.prevBtn.disabled = state.currentSlide === 0;
            dom.nextBtn.disabled = state.currentSlide === state.totalSlides - 1;
            dom.pageInd.innerText = `${state.currentSlide + 1} / ${state.totalSlides}`;
        }

        dom.nextBtn.onclick = () => {
            if (state.currentSlide < state.totalSlides - 1) {
                state.currentSlide++;
                updateUI();
            }
        };

        dom.prevBtn.onclick = () => {
            if (state.currentSlide > 0) {
                state.currentSlide--;
                updateUI();
            }
        };

        // è¯­è¨€åˆ‡æ¢
        dom.langBtn.onclick = () => {
            state.lang = state.lang === 'zh' ? 'en' : 'zh';
            document.body.className = state.lang === 'zh' ? 'lang-zh' : 'lang-en';
        };

        // é”®ç›˜æ§åˆ¶
        document.onkeydown = (e) => {
            if (e.key === 'ArrowRight') dom.nextBtn.click();
            if (e.key === 'ArrowLeft') dom.prevBtn.click();
        };

        /* --- åŠ¨ç”»å¼•æ“ (Canvas) --- */
        // æ¯ä¸ªåœºæ™¯çš„ç»˜åˆ¶é€»è¾‘
        const scenes = {
            1: (ctx, w, h, t) => { // å½±å­æ¨¡å‹
                const cx = w/2, cy = h/2, r = 60;
                const x = r * Math.cos(t);
                const y = r * Math.sin(t);
                
                // åœ†
                ctx.beginPath(); ctx.arc(cx, cy-40, r, 0, 7); ctx.strokeStyle='#ddd'; ctx.lineWidth=2; ctx.stroke();
                // æ—‹è½¬ç‚¹
                ctx.beginPath(); ctx.arc(cx+x, cy-40+y, 8, 0, 7); ctx.fillStyle='#4ECDC4'; ctx.fill();
                // æŠ•å½±çº¿
                ctx.beginPath(); ctx.moveTo(cx+x, cy-40+y); ctx.lineTo(cx+x, cy+60); ctx.setLineDash([5,5]); ctx.strokeStyle='#999'; ctx.stroke(); ctx.setLineDash([]);
                // å½±å­ï¼ˆæŒ¯åŠ¨ï¼‰
                ctx.beginPath(); ctx.moveTo(20, cy+60); ctx.lineTo(w-20, cy+60); ctx.strokeStyle='#333'; ctx.stroke();
                ctx.beginPath(); ctx.arc(cx+x, cy+60, 12, 0, 7); ctx.fillStyle='#1a1a1a'; ctx.fill();
                
                ctx.fillStyle='#333'; ctx.font='14px Arial'; ctx.fillText('SHM (Shadow)', cx+x-40, cy+90);
            },
            2: (ctx, w, h, t) => { // åŠå¾„ x0
                const cx = w/2, cy = h/2;
                ctx.beginPath(); ctx.arc(cx, cy, 70, 0, 7); ctx.strokeStyle='#eee'; ctx.lineWidth=2; ctx.stroke();
                // ç»˜åˆ¶åŠå¾„
                ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(cx + 50, cy - 50); 
                ctx.strokeStyle='blue'; ctx.lineWidth=4; ctx.stroke();
                ctx.fillStyle='blue'; ctx.font='bold 20px Arial'; ctx.fillText('xâ‚€', cx+20, cy-30);
            },
            3: (ctx, w, h, t) => { // ä¸‰è§’å½¢äº¤äº’
                // æ­¤åœºæ™¯ä¸ä¾èµ–æ—¶é—´ tï¼Œä¾èµ–æ»‘å—
                const angle = dom.angleSlider.value * Math.PI / 180;
                const cx = w/2, cy = h/2, r = 80;
                
                // è¿™é‡Œçš„Yè½´ä¸ºäº†ç¬¦åˆç›´è§‰ï¼Œå‘ä¸Šä¸ºè´Ÿ(Canvasé»˜è®¤)ï¼Œæˆ‘ä»¬åšä¸ªè½¬æ¢è®©è§†è§‰å‘ä¸Š
                const px = cx + r * Math.cos(angle);
                const py = cy - r * Math.sin(angle); // å‡å»sinï¼Œè®©ç‚¹å¾€ä¸Šèµ°

                // åœ†è½®å»“
                ctx.beginPath(); ctx.arc(cx, cy, r, 0, 7); ctx.strokeStyle='#f0f0f0'; ctx.stroke();

                // è“çº¿ (æ–œè¾¹)
                ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(px, py);
                ctx.strokeStyle='blue'; ctx.lineWidth=4; ctx.stroke();

                // çº¢çº¿ (å¯¹è¾¹/é«˜åº¦)
                ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(px, cy);
                ctx.strokeStyle='#FF6B6B'; ctx.lineWidth=4; ctx.stroke();

                // åº•è¾¹ (è¾…åŠ©)
                ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(px, cy);
                ctx.strokeStyle='#ccc'; ctx.lineWidth=2; ctx.stroke();

                // æ ‡æ³¨
                ctx.font='16px Arial';
                ctx.fillStyle='blue'; ctx.fillText('xâ‚€', cx-20, cy-20);
                ctx.fillStyle='#FF6B6B'; ctx.fillText('x', px+5, (cy+py)/2);
            },
            6: (ctx, w, h, t) => { // å¼§åº¦é™·é˜±
                const cx = w/2, cy = h/2;
                // ç®€å•çš„è¡¨ç›˜
                ctx.beginPath(); ctx.arc(cx, cy, 60, 0, 7); ctx.strokeStyle='#333'; ctx.lineWidth=2; ctx.stroke();
                // æŒ‡é’ˆ
                const ang = t % 6.28;
                ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(cx + 50*Math.cos(ang), cy + 50*Math.sin(ang));
                ctx.strokeStyle='red'; ctx.lineWidth=3; ctx.stroke();
                
                ctx.font='20px monospace'; ctx.fillStyle='black'; ctx.textAlign='center';
                ctx.fillText((ang).toFixed(2) + ' rad', cx, cy + 90);
            },
            7: (ctx, w, h, t) => { // è¡ç§‹åƒ (å•æ‘†)
                const cx = w/2;
                const len = 150;
                const angle = 0.5 * Math.sin(t * 2); // æ‘†åŠ¨è§’åº¦
                const bobX = cx + len * Math.sin(angle);
                const bobY = 0 + len * Math.cos(angle);
                
                ctx.beginPath(); ctx.moveTo(cx, 0); ctx.lineTo(bobX, bobY); ctx.strokeStyle='#333'; ctx.lineWidth=2; ctx.stroke();
                ctx.beginPath(); ctx.arc(bobX, bobY, 15, 0, 7); ctx.fillStyle='#FF6B6B'; ctx.fill();
                
                // é€Ÿåº¦æŒ‡ç¤ºå™¨
                const speed = Math.abs(Math.cos(t*2)); // ç®€åŒ–çš„é€Ÿåº¦è§†è§‰
                ctx.fillStyle='black'; ctx.textAlign='left';
                if(speed > 0.9) ctx.fillText('Max Speed!', 10, 30);
                else if(speed < 0.1) ctx.fillText('Zero Speed', 10, 30);
            },
            9: (ctx, w, h, t) => { // èƒ½é‡
                const cx = w/2, cy = h/2;
                const x = 60 * Math.sin(t * 1.5);
                
                // å°çƒ
                ctx.beginPath(); ctx.arc(cx+x, cy, 10, 0, 7); ctx.fillStyle='#333'; ctx.fill();
                ctx.beginPath(); ctx.moveTo(0, cy+15); ctx.lineTo(w, cy+15); ctx.strokeStyle='#ddd'; ctx.stroke();

                // èƒ½é‡æ¡
                const maxE = 60*60;
                const Ep = x*x;
                const Ek = maxE - Ep;
                
                // Ek (çº¢)
                ctx.fillStyle = '#FF6B6B';
                ctx.fillRect(cx - 60, cy + 40, Ek * 0.03, 10);
                
                // Ep (è“)
                ctx.fillStyle = '#4ECDC4';
                ctx.fillRect(cx + 10, cy + 40, Ep * 0.03, 10);
            },
            10: (ctx, w, h, t, extra) => { // å…±æŒ¯
                const cx = w/2;
                // ç‰©ç†æ¨¡æ‹Ÿ
                if (!extra.setup) {
                    extra.y = 0; extra.v = 0; extra.setup = true;
                }
                
                // æ¬§æ‹‰ç§¯åˆ†
                const k = 0.05;
                const drag = 0.02;
                const a = -k * extra.y - drag * extra.v;
                extra.v += a;
                extra.y += extra.v;
                
                // ç»˜åˆ¶å¼¹ç°§
                ctx.beginPath(); ctx.moveTo(cx, 0); ctx.lineTo(cx, 100 + extra.y);
                ctx.strokeStyle='#333'; ctx.lineWidth=2; ctx.stroke();
                
                // ç»˜åˆ¶å—
                ctx.beginPath(); ctx.rect(cx - 20, 100 + extra.y, 40, 40);
                ctx.fillStyle = '#FFE66D'; ctx.fill(); ctx.stroke();
                
                // ç»˜åˆ¶è§†è§‰è¾…åŠ©
                const amp = Math.abs(extra.y);
                if (amp > 80) {
                    ctx.fillStyle = 'red'; ctx.fillText('RESONANCE!', 10, 30);
                }
            }
        };

        // åŠ¨ç”»æ§åˆ¶å‡½æ•°
        const extraData = {}; // å­˜å‚¨ç‰©ç†çŠ¶æ€
        function startScene(idx) {
            const canvas = document.querySelector(`.card[data-id="${idx}"] canvas`);
            if (!canvas) return;
            
            // å¦‚æœæ˜¯ç¬¬3é¡µ(ä¸‰è§’å½¢)ï¼Œç‰¹åˆ«å¤„ç†ï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ—¶é—´å¾ªç¯ï¼Œå®ƒæ˜¯å“åº”æ»‘å—çš„
            if (idx === 3) {
                const draw3 = () => {
                    resizeCanvas(canvas);
                    const ctx = canvas.getContext('2d');
                    scenes[3](ctx, canvas.width, canvas.height, 0);
                };
                draw3();
                dom.angleSlider.oninput = draw3; // ç»‘å®šæ»‘å—
                return;
            }

            // å…¶ä»–åœºæ™¯å¯åŠ¨æ—¶é—´å¾ªç¯
            let t = 0;
            const ctx = canvas.getContext('2d');
            
            const loop = () => {
                resizeCanvas(canvas);
                t += 0.05;
                if (scenes[idx]) {
                    scenes[idx](ctx, canvas.width, canvas.height, t, extraData);
                }
                state.animators[idx] = requestAnimationFrame(loop);
            };
            loop();
        }

        function stopScene(idx) {
            if (state.animators[idx]) {
                cancelAnimationFrame(state.animators[idx]);
                delete state.animators[idx];
            }
        }

        // è¾…åŠ©ï¼šå¤„ç†Retinaå±å¹•æ¸…æ™°åº¦ & å“åº”å¼å¤§å°
        function resizeCanvas(canvas) {
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }

        // ç»‘å®šå…±æŒ¯æŒ‰é’®
        dom.pushBtn.onclick = () => {
            if (extraData.v !== undefined) {
                extraData.v += 5; // ç»™ä¸€ä¸ªé€Ÿåº¦å†²å‡»
                // æŒ‰é’®è§†è§‰åé¦ˆ
                dom.pushBtn.style.transform = 'scale(0.95)';
                setTimeout(()=> dom.pushBtn.style.transform = 'scale(1)', 100);
            }
        };

        // åˆå§‹åŒ–
        updateUI();

    </script>
</body>
</html>
